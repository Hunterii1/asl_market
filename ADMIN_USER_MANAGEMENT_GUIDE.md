# ุฑุงูููุง ูุฏุฑุช ฺฉุงุฑุจุฑุงู ุฏุฑ ูพูู ุงุฏูู

## ุฎูุงุตู ุชุบุฑุงุช

ุณุณุชู ูุฏุฑุช ฺฉุงุฑุจุฑุงู ุฏุฑ ูพูู ุงุฏูู ุจู ุทูุฑ ฺฉุงูู ูพุงุฏูโุณุงุฒ ุดุฏ ู ุดุงูู ุณู ูุงุจูุช ุงุตู ุงุณุช:

### 1. โ ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุชฺฉ
### 2. โ ูุงุฑุฏุณุงุฒ ฺฏุฑูู ฺฉุงุฑุจุฑุงู (ุงุฒ Excel/CSV)
### 3. โ ุฏุงูููุฏ Excel ฺฉุงุฑุจุฑุงู

---

## ๐ง ุชุบุฑุงุช Backend

### Endpoints ุฌุฏุฏ:

#### 1. ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุชฺฉ
```
POST /api/v1/admin/users
```

**Request Body:**
```json
{
  "name": "ุนู ูุญูุฏ",
  "email": "ali@example.com",
  "phone": "09123456789",
  "telegram_id": "@ali_mohammadi",
  "balance": 0,
  "is_active": true,
  "password": "123456"
}
```

**Response:**
```json
{
  "success": true,
  "message": "ฺฉุงุฑุจุฑ ุจุง ููููุช ุงุฌุงุฏ ุดุฏ",
  "data": {
    "id": 123,
    "first_name": "ุนู",
    "last_name": "ูุญูุฏ",
    "email": "ali@example.com",
    "phone": "09123456789",
    "is_active": true
  }
}
```

**ูฺฺฏโูุง:**
- ูุงู ฺฉุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจู `first_name` ู `last_name` ุชุจุฏู ูโุดูุฏ
- ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ: `123456`
- ุจุฑุฑุณ ุชฺฉุฑุงุฑ ูุจูุฏู ุงูู ู ุดูุงุฑู ุชููู
- Hash ฺฉุฑุฏู ุฑูุฒ ุนุจูุฑ ุจุง bcrypt

---

#### 2. ูุงุฑุฏุณุงุฒ ฺฏุฑูู ฺฉุงุฑุจุฑุงู
```
POST /api/v1/admin/import/users
```

**Request:**
- Content-Type: `multipart/form-data`
- Field name: `file`
- Supported formats: `.csv`, `.xlsx`, `.xls`
- Max file size: 5MB

**ูุฑูุช ูุงู CSV:**
```csv
ูุงู,ุงูู,ุชููู,ุชูฺฏุฑุงู,ูุถุนุช
ุนู ูุญูุฏ,ali@example.com,09123456789,@ali_mohammadi,ูุนุงู
ูุฑู ุงุญูุฏ,maryam@example.com,09121234567,@maryam,ุบุฑูุนุงู
```

**ูุฑูุช ูุงู Excel:**
| ูุงู | ุงูู | ุชููู | ุชูฺฏุฑุงู | ูุถุนุช |
|-----|-------|------|---------|--------|
| ุนู ูุญูุฏ | ali@example.com | 09123456789 | @ali_mohammadi | ูุนุงู |
| ูุฑู ุงุญูุฏ | maryam@example.com | 09121234567 | @maryam | ุบุฑูุนุงู |

**Response:**
```json
{
  "success": true,
  "message": "15 ฺฉุงุฑุจุฑ ุจุง ููููุช ูุงุฑุฏ ุดุฏุ 2 ฺฉุงุฑุจุฑ ุจุง ุฎุทุง ููุงุฌู ุดุฏ",
  "data": {
    "success_count": 15,
    "failed_count": 2,
    "errors": [
      "ุฑุฏู 3: ุงูู test@example.com ูุจูุงู ุซุจุช ุดุฏู ุงุณุช",
      "ุฑุฏู 7: ุดูุงุฑู ุชููู 09123456789 ูุจูุงู ุซุจุช ุดุฏู ุงุณุช"
    ]
  }
}
```

**ูฺฺฏโูุง:**
- ูพุดุชุจุงู ุงุฒ ูุฑูุชโูุง CSV ู Excel
- ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู ูุฑ ุฑุฏู
- ฺฏุฒุงุฑุด ุฏูู ุฎุทุงูุง ุจุง ุดูุงุฑู ุฑุฏู
- ุจุฑุฑุณ ุชฺฉุฑุงุฑ ูุจูุฏู ุงูู ู ุดูุงุฑู ุชููู
- ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ `123456` ุจุฑุง ููู ฺฉุงุฑุจุฑุงู

---

#### 3. ุฏุงูููุฏ Excel ฺฉุงุฑุจุฑุงู
```
GET /api/v1/admin/export/users
```

**Response:**
```json
{
  "success": true,
  "message": "ูุงู Excel ุจุง ููููุช ุงุฌุงุฏ ุดุฏ",
  "filename": "users_export_20260211_143022.xlsx",
  "url": "/uploads/exports/users_export_20260211_143022.xlsx"
}
```

**ูฺฺฏโูุง:**
- ุฎุฑูุฌ Excel ุจุง ุชูุงู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑุงู
- ุดุงูู: ID, ูุงู, ูุงู ุฎุงููุงุฏฺฏ, ุงูู, ุชููู, ูุถุนุช, ุงุฏูู, ุชุงุฑุฎ ุซุจุช
- ูุงู ุฏุฑ ูพูุดู `uploads/exports/` ุฐุฎุฑู ูโุดูุฏ

---

## ๐จ ุชุบุฑุงุช Frontend (Admin Panel)

### 1. ุฏุงููฺฏ ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ (`AddUserDialog`)

**ููุฏูุง:**
- ูุงู ู ูุงู ุฎุงููุงุฏฺฏ (ุงูุฒุงู)
- ุงูู (ุงูุฒุงู)
- ุดูุงุฑู ุชููู (ุงูุฒุงู)
- ุขุฏ ุชูฺฏุฑุงู (ุงุฎุชุงุฑ)
- ููุฌูุฏ ุงููู (ูพุดโูุฑุถ: 0)
- ูุถุนุช (ูุนุงู/ุบุฑูุนุงู/ูุณุฏูุฏ)

**ุงุนุชุจุงุฑุณูุฌ:**
- ูุงู: ุญุฏุงูู 2 ฺฉุงุฑุงฺฉุชุฑ
- ุงูู: ูุฑูุช ูุนุชุจุฑ
- ุชููู: 10 ุง 11 ุฑูู
- ููุฌูุฏ: ุนุฏุฏ ูุซุจุช

---

### 2. ุฏุงููฺฏ ูุงุฑุฏุณุงุฒ ฺฏุฑูู (`ImportUsersDialog`)

**ูุฑุงุญู:**

1. **ุขูพููุฏ ูุงู:**
   - ฺฉุดุฏู ู ุฑูุง ฺฉุฑุฏู ูุงู (Drag & Drop)
   - ุง ฺฉูฺฉ ู ุงูุชุฎุงุจ ูุงู
   - ุฏุงูููุฏ ูุงูุจ CSV ุจุฑุง ุฑุงุญุช

2. **ูพุดโููุงุด ู ุงูุชุฎุงุจ:**
   - ููุงุด ุฑุฏูโูุง ูุนุชุจุฑ ู ูุงูุนุชุจุฑ
   - ุงูฺฉุงู ุงูุชุฎุงุจ/ุนุฏู ุงูุชุฎุงุจ ูุฑ ุฑุฏู
   - ููุงุด ุฎุทุงูุง ูุฑ ุฑุฏู ูุงูุนุชุจุฑ

3. **ูุงุฑุฏุณุงุฒ:**
   - ููุงุด ูพุดุฑูุช (Progress bar)
   - ฺฏุฒุงุฑุด ููุง ููููุช/ุฎุทุง

4. **ูุชุฌู:**
   - ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ูููู
   - ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู ูุงูููู
   - ูุณุช ุฎุทุงูุง

---

### 3. ุฏุงููฺฏ ุฎุฑูุฌ Excel (`ExportUsersDialog`)

**ูุงุจูุชโูุง:**
- ุฏุงูููุฏ ุชูุงู ฺฉุงุฑุจุฑุงู
- ุง ุฏุงูููุฏ ฺฉุงุฑุจุฑุงู ุงูุชุฎุงุจ ุดุฏู
- ูุฑูุช Excel ุจุง ุณุชููโูุง ฺฉุงูู

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุฏุฑ ูพูู ุงุฏูู:

1. **ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุชฺฉ:**
   - ฺฉูฺฉ ุฑู ุฏฺฉูู "ฺฉุงุฑุจุฑ ุฌุฏุฏ"
   - ูพุฑ ฺฉุฑุฏู ูุฑู
   - ฺฉูฺฉ "ุงูุฒูุฏู ฺฉุงุฑุจุฑ"

2. **ูุงุฑุฏุณุงุฒ ฺฏุฑูู:**
   - ฺฉูฺฉ ุฑู ุฏฺฉูู "ูุงุฑุฏุณุงุฒ"
   - ุฏุงูููุฏ ูุงูุจ (ุงุฎุชุงุฑ)
   - ุขูพููุฏ ูุงู CSV/Excel
   - ุจุฑุฑุณ ูพุดโููุงุด
   - ฺฉูฺฉ "ูุงุฑุฏุณุงุฒ"

3. **ุฏุงูููุฏ Excel:**
   - ฺฉูฺฉ ุฑู ุฏฺฉูู "ุฎุฑูุฌ"
   - ุงูุชุฎุงุจ "ููู ฺฉุงุฑุจุฑุงู" ุง "ฺฉุงุฑุจุฑุงู ุงูุชุฎุงุจ ุดุฏู"
   - ูุงู Excel ุฏุงูููุฏ ูโุดูุฏ

---

## ๐ ุฏุณุชูุฑุงุช Deploy

### ุฏุฑ ุณุฑูุฑ:

```bash
# 1. SSH ุจู ุณุฑูุฑ
ssh root@asllmarket.com

# 2. ุฑูุชู ุจู ูพูุดู backend
cd /var/www/asl_market/backend

# 3. Pull ฺฉุฑุฏู ุชุบุฑุงุช
git pull

# 4. Build ฺฉุฑุฏู backend
go build -o asl-market-backend

# 5. Restart ฺฉุฑุฏู backend
supervisorctl restart backend

# 6. ุจุฑุฑุณ ูุถุนุช
supervisorctl status backend
```

### ุงุฌุงุฏ ูพูุดู exports:

```bash
mkdir -p /var/www/asl_market/backend/uploads/exports
chmod 755 /var/www/asl_market/backend/uploads/exports
```

---

## ๐ ุงููุช

### ูฺฉุงุช ุงููุช:

1. **ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ:**
   - ููู ฺฉุงุฑุจุฑุงู ุฌุฏุฏ ุจุง ุฑูุฒ `123456` ุงุฌุงุฏ ูโุดููุฏ
   - ุชูุตู ูโุดูุฏ ฺฉุงุฑุจุฑุงู ุฏุฑ ุงููู ูุฑูุฏ ุฑูุฒ ุฑุง ุชุบุฑ ุฏููุฏ

2. **ุงุนุชุจุงุฑุณูุฌ:**
   - ุจุฑุฑุณ ุชฺฉุฑุงุฑ ูุจูุฏู ุงูู ู ุชููู
   - ุงุนุชุจุงุฑุณูุฌ ูุฑูุช ุงูู
   - ูุญุฏูุฏุช ุญุฌู ูุงู (5MB)

3. **ุฏุณุชุฑุณ:**
   - ููุท ุงุฏููโูุง ูโุชูุงููุฏ ฺฉุงุฑุจุฑ ุงุถุงูู ฺฉููุฏ
   - ูุงุฒ ุจู ุชูฺฉู JWT ูุนุชุจุฑ

---

## ๐ ุนุจโุงุจ

### ุฎุทุงูุง ุฑุงุฌ:

1. **404 Not Found:**
   - ูุทูุฆู ุดูุฏ backend rebuild ุดุฏู ุงุณุช
   - ุจุฑุฑุณ ฺฉูุฏ route ูุง ุฏุฑุณุช ุงุถุงูู ุดุฏูโุงูุฏ

2. **ูุงู ุขูพููุฏ ููโุดูุฏ:**
   - ุจุฑุฑุณ ุญุฌู ูุงู (ุญุฏุงฺฉุซุฑ 5MB)
   - ุจุฑุฑุณ ูุฑูุช ูุงู (CSV, XLSX, XLS)

3. **ฺฉุงุฑุจุฑ ุชฺฉุฑุงุฑ:**
   - ุงูู ุง ุดูุงุฑู ุชููู ูุจูุงู ุซุจุช ุดุฏู ุงุณุช
   - ุงุฒ ููุฏูุง ููุญุตุฑ ุจู ูุฑุฏ ุงุณุชูุงุฏู ฺฉูุฏ

---

## ๐ ููููู ูุงู CSV

```csv
ูุงู,ุงูู,ุชููู,ุชูฺฏุฑุงู,ูุถุนุช
ุนู ูุญูุฏ,ali1@example.com,09123456789,@ali1,ูุนุงู
ูุฑู ุงุญูุฏ,maryam1@example.com,09121234567,@maryam1,ูุนุงู
ุฑุถุง ฺฉุฑู,reza1@example.com,09351234567,@reza1,ุบุฑูุนุงู
ุณุงุฑุง ููุฑ,sara1@example.com,09191234567,@sara1,ูุนุงู
ูุญูุฏ ุญุณู,mohammad1@example.com,09381234567,@mohammad1,ูุณุฏูุฏ
```

---

## โ Checklist Deploy

- [ ] Backend: ุชุงุจุน `CreateUser` ุงุถุงูู ุดุฏู
- [ ] Backend: ุชุงุจุน `ImportUsersFromExcel` ุงุถุงูู ุดุฏู
- [ ] Backend: Route ูุง ุฌุฏุฏ ุงุถุงูู ุดุฏู
- [ ] Backend: ูพูุดู `uploads/exports` ุงุฌุงุฏ ุดุฏู
- [ ] Frontend: `AddUserDialog` ุจู API ูุงูุน ูุชุตู ุดุฏู
- [ ] Frontend: `ImportUsersDialog` ุจู API ูุงูุน ูุชุตู ุดุฏู
- [ ] Frontend: `adminApi.createUser` ุงุถุงูู ุดุฏู
- [ ] Frontend: `adminApi.importUsers` ุงุถุงูู ุดุฏู
- [ ] Backend rebuild ุดุฏู
- [ ] Backend restart ุดุฏู
- [ ] ุชุณุช ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุชฺฉ
- [ ] ุชุณุช ูุงุฑุฏุณุงุฒ ฺฏุฑูู
- [ ] ุชุณุช ุฏุงูููุฏ Excel

---

## ๐ ูุชุฌู

ุณุณุชู ูุฏุฑุช ฺฉุงุฑุจุฑุงู ุจู ุทูุฑ ฺฉุงูู ูพุงุฏูโุณุงุฒ ุดุฏ ู ุดุงูู:

โ ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑ ุชฺฉ ุจุง ูุฑู ฺฉุงูู  
โ ูุงุฑุฏุณุงุฒ ฺฏุฑูู ุงุฒ CSV/Excel  
โ ุฏุงูููุฏ Excel ุชูุงู ฺฉุงุฑุจุฑุงู  
โ ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู  
โ ฺฏุฒุงุฑุดโุฏู ุฏูู ุฎุทุงูุง  
โ ุฑุงุจุท ฺฉุงุฑุจุฑ ุฒุจุง ู ฺฉุงุฑุจุฑุฏ  

ููู ฺุฒ ุขูุงุฏู ุงุณุช! ููุท ฺฉุงูุณุช backend ุฑุง rebuild ู restart ฺฉูุฏ.
