# ุฑุงูููุง ุฑุงูโุงูุฏุงุฒ ุณุณุชู ูพุฑูฺูโูุง ูุฒุชูุฑ (Two-Way Matching)

ุงู ูฺุฑ ุจู ูุฒุชูุฑูุง ุงุฌุงุฒู ูโุฏูุฏ ูพุฑูฺูโูุง ุฎูุฏ ุฑุง ุซุจุช ฺฉููุฏ ู ุชุฃููโฺฉููุฏูโูุง ูโุชูุงููุฏ ุจุจููุฏ ู ูพุดููุงุฏ ุจุฏููุฏ (ูฺูฺฏ ุฏูุทุฑูู).

## ุชุบุฑุงุช ุจฺฉโุงูุฏ

### 1. ูุฏูโูุง ุฌุฏุฏ
- `VisitorProject`: ูพุฑูฺูโูุง ุซุจุช ุดุฏู ุชูุณุท ูุฒุชูุฑูุง
- `VisitorProjectProposal`: ูพุดููุงุฏูุง ุชุฃููโฺฉููุฏูโูุง ุจุฑุง ูพุฑูฺูโูุง
- `VisitorProjectNotification`: ููุชูฺฉุดูโูุง ุณุณุชู

ูุงู: `backend/models/visitor_project.go`

### 2. ฺฉูุชุฑูุฑ ุฌุฏุฏ
- `VisitorProjectController`: ูุฏุฑุช ุนููุงุช CRUD ูพุฑูฺูโูุง ู ูพุดููุงุฏูุง

ูุงู: `backend/controllers/visitor_project_controller.go`

### 3. API Endpoints ุฌุฏุฏ

#### ุจุฑุง ูุฒุชูุฑูุง:
- `POST /api/v1/visitor-projects` - ุงุฌุงุฏ ูพุฑูฺู ุฌุฏุฏ
- `GET /api/v1/visitor-projects/my` - ุฏุฑุงูุช ูพุฑูฺูโูุง ูู
- `GET /api/v1/visitor-projects/:id` - ุฌุฒุฆุงุช ฺฉ ูพุฑูฺู
- `PUT /api/v1/visitor-projects/:id` - ูุฑุงุด ูพุฑูฺู
- `DELETE /api/v1/visitor-projects/:id` - ุญุฐู ูพุฑูฺู

#### ุจุฑุง ุชุฃููโฺฉููุฏูโูุง:
- `GET /api/v1/visitor-projects/available` - ุฏุฑุงูุช ูพุฑูฺูโูุง ูุนุงู
- `POST /api/v1/visitor-projects/:id/proposal` - ุงุฑุณุงู ูพุดููุงุฏ
- `GET /api/v1/visitor-projects/supplier-capacity` - ุธุฑูุช ุชุฃููโฺฉููุฏูโูุง

ูุงู: `backend/routes/routes.go`

### 4. ูุงฺฏุฑุดู ุฏุชุงุจุณ

ุฏู ุฑูุด ุจุฑุง ุงุนูุงู ูุงฺฏุฑุดู:

#### ุฑูุด 1: AutoMigrate (ุฎูุฏฺฉุงุฑ)
ุจฺฉโุงูุฏ ุฑุง ุฑโุงุณุชุงุฑุช ฺฉูุฏ. GORM ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฌุฏุงูู ุฌุฏุฏ ุฑุง ุงุฌุงุฏ ูโฺฉูุฏ.

```bash
cd backend
# ุงฺฏุฑ ุงุฒ systemd ุงุณุชูุงุฏู ูโฺฉูุฏ:
sudo systemctl restart asl-market-backend

# ุง ุงฺฏุฑ ุงุฒ pm2 ุงุณุชูุงุฏู ูโฺฉูุฏ:
pm2 restart asl-market-backend

# ุง ุงฺฏุฑ ุจู ุตูุฑุช ุฏุณุช ุงุฌุฑุง ูโฺฉูุฏ:
./asl-market-backend
```

#### ุฑูุด 2: SQL Manual (ุฏุณุช)
ุงฺฏุฑ ุชุฑุฌุญ ูโุฏูุฏ ุจู ุตูุฑุช ุฏุณุช ุฌุฏุงูู ุฑุง ุงุฌุงุฏ ฺฉูุฏ:

```bash
mysql -u your_username -p your_database < backend/migrations/add_visitor_projects.sql
```

## ุชุบุฑุงุช ูุฑุงูุชโุงูุฏ

### 1. API Service Methods ุฌุฏุฏ
ูุชุฏูุง ุฌุฏุฏ ุฏุฑ `src/services/api.ts` ุจุฑุง ุงุฑุชุจุงุท ุจุง ุจฺฉโุงูุฏ:
- `createVisitorProject()`
- `getMyVisitorProjects()`
- `getVisitorProjectDetails()`
- `updateVisitorProject()`
- `deleteVisitorProject()`
- `getAvailableVisitorProjects()`
- `submitVisitorProjectProposal()`
- `getSupplierCapacityForVisitorProjects()`

### 2. ุตูุญุงุช ุฌุฏุฏ

#### ุจุฑุง ูุฒุชูุฑูุง:
`/visitor-projects` - ูุฏุฑุช ูพุฑูฺูโูุง ูุฒุชูุฑ

ูุงู: `src/pages/VisitorProjects.tsx`

ูฺฺฏโูุง:
- ุซุจุช ูพุฑูฺู ุฌุฏุฏ ุจุง ูุฑู ฺฉุงูู
- ูุดุงูุฏู ูุณุช ูพุฑูฺูโูุง ุจุง ููุชุฑูุง ูุถุนุช
- ูุดุงูุฏู ุฌุฒุฆุงุช ู ูพุดููุงุฏูุง ุฏุฑุงูุช
- ูุฑุงุด ู ุญุฐู ูพุฑูฺูโูุง

#### ุจุฑุง ุชุฃููโฺฉููุฏูโูุง:
`/supplier-visitor-projects` - ูุดุงูุฏู ู ุงุฑุณุงู ูพุดููุงุฏ ุจู ูพุฑูฺูโูุง

ูุงู: `src/pages/SupplierVisitorProjects.tsx`

ูฺฺฏโูุง:
- ูุดุงูุฏู ูพุฑูฺูโูุง ูุนุงู ูุฒุชูุฑูุง
- ุงุฑุณุงู ูพุดููุงุฏ (ุนูุงููโููุฏ / ุณูุงู)
- ุงุฑุณุงู ููุช ูพุดููุงุฏ ู ูพุงู

### 3. ูุณุฑูุง ุฌุฏุฏ ุฏุฑ App.tsx
```tsx
/visitor-projects - ูุฏุฑุช ูพุฑูฺูโูุง ูุฒุชูุฑ (ูุฒุชูุฑ)
/supplier-visitor-projects - ูพุฑูฺูโูุง ูุฒุชูุฑ (ุชุฃููโฺฉููุฏู)
```

### 4. ฺฉูพุงุฑฺฺฏ ุจุง ุตูุญู Asl Match
ุฏู ุฏฺฉูู ุฌุฏุฏ ุฏุฑ `/asl-match` ุจุฑุง ุฏุณุชุฑุณ ุณุฑุน:
- "ูพุฑูฺูโูุง ูุฒุชูุฑ (ูุฒุชูุฑ)"
- "ูพุฑูฺูโูุง ูุฒุชูุฑ (ุชุฃููโฺฉููุฏู)"

## ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ูุฒุชูุฑูุง:

1. ูุงุฑุฏ ุตูุญู `/visitor-projects` ุดูุฏ
2. ุฑู "ุซุจุช ูพุฑูฺู ุฌุฏุฏ" ฺฉูฺฉ ฺฉูุฏ
3. ูุฑู ุฑุง ุจุง ุงุทูุงุนุงุช ูพุฑูฺู ูพุฑ ฺฉูุฏ:
   - ุนููุงู ูพุฑูฺู
   - ูุงู ูุญุตูู
   - ููุฏุงุฑ ู ูุงุญุฏ
   - ฺฉุดูุฑูุง ููุตุฏ
   - ุจูุฏุฌู ู ุงุฑุฒ
   - ุดุฑุงุท ูพุฑุฏุงุฎุช (ุงุฎุชุงุฑ)
   - ุฒูุงู ุชุญูู (ุงุฎุชุงุฑ)
   - ุชุงุฑุฎ ุงููุถุง
   - ุชูุถุญุงุช (ุงุฎุชุงุฑ)
4. ูพุฑูฺู ุซุจุช ูโุดูุฏ ู ุชุฃููโฺฉููุฏูโูุง ููุงุณุจ ูุทูุน ูโุดููุฏ
5. ูพุดููุงุฏูุง ุฏุฑุงูุช ุฑุง ุฏุฑ ุฌุฒุฆุงุช ูพุฑูฺู ูุดุงูุฏู ฺฉูุฏ

### ุจุฑุง ุชุฃููโฺฉููุฏูโูุง:

1. ูุงุฑุฏ ุตูุญู `/supplier-visitor-projects` ุดูุฏ
2. ูพุฑูฺูโูุง ูุนุงู ุฑุง ูุดุงูุฏู ฺฉูุฏ
3. ุฑู "ุงุฑุณุงู ูพุดููุงุฏ" ฺฉูฺฉ ฺฉูุฏ
4. ููุน ูพุดููุงุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ:
   - "ุนูุงููโููุฏ ุจู ููฺฉุงุฑ": ุจุฑุง ุงุฑุณุงู ูพุดููุงุฏ ุฑุณู
   - "ุณูุงู ุฏุงุฑู": ุจุฑุง ูพุฑุณุฏู ุณูุงู
5. ูพุงู ู ููุช ูพุดููุงุฏ (ุงุฎุชุงุฑ) ุฑุง ูุงุฑุฏ ฺฉูุฏ
6. ูพุดููุงุฏ ุงุฑุณุงู ูโุดูุฏ ู ูุฒุชูุฑ ูุทูุน ูโุดูุฏ

## ุงููุช ู ุฏุณุชุฑุณ

- ุชูุงู endpointโูุง ูุงุฒ ุจู Authentication ุฏุงุฑูุฏ
- ูุฒุชูุฑูุง ููุท ูโุชูุงููุฏ ูพุฑูฺูโูุง ุฎูุฏ ุฑุง ูุฑุงุด/ุญุฐู ฺฉููุฏ
- ุชุฃููโฺฉููุฏูโูุง ููุท ูโุชูุงููุฏ ูพุฑูฺูโูุง ูุนุงู ู ูููุถ ูุดุฏู ุฑุง ุจุจููุฏ
- ูุฑ ุชุฃููโฺฉููุฏู ููุท ฺฉ ุจุงุฑ ูโุชูุงูุฏ ุจุฑุง ูุฑ ูพุฑูฺู ูพุดููุงุฏ ุจุฏูุฏ

## ูุถุนุชโูุง ูพุฑูฺู

- `pending`: ุฏุฑ ุงูุชุธุงุฑ ุชุฃุฏ
- `active`: ูุนุงู ู ูุงุจู ูุดุงูุฏู ุจุฑุง ุชุฃููโฺฉููุฏูโูุง
- `accepted`: ฺฉ ุชุฃููโฺฉููุฏู ูพุฐุฑูุชู ุดุฏู
- `expired`: ูููุถ ุดุฏู
- `cancelled`: ูุบู ุดุฏู ุชูุณุท ูุฒุชูุฑ
- `completed`: ุชฺฉูู ุดุฏู

## ููุน ูพุดููุงุฏูุง

- `interested`: ุนูุงููโููุฏ ุจู ููฺฉุงุฑ (ุดูุงุฑุด ูโุดูุฏ ุฏุฑ `matched_supplier_count`)
- `rejected`: ุฑุฏ ุดุฏู
- `question`: ุณูุงู ุฏุงุฑู

## ุชุณุช

### ุชุณุช ุจฺฉโุงูุฏ:
```bash
# ุชุณุช ุงุฌุงุฏ ูพุฑูฺู (ุจุง ุชูฺฉู ูุฒุชูุฑ)
curl -X POST http://localhost:8080/api/v1/visitor-projects \
  -H "Authorization: Bearer YOUR_VISITOR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "project_title": "ุชุฃูู ุฒุนูุฑุงู ุตุงุฏุฑุงุช",
    "product_name": "ุฒุนูุฑุงู ุณุฑฺฏู",
    "quantity": "500",
    "unit": "kg",
    "target_countries": "ุงูุงุฑุงุชุ ุนูุงู",
    "budget": "50000",
    "currency": "USD",
    "expires_at": "2026-03-10T00:00:00Z"
  }'

# ุชุณุช ูุดุงูุฏู ูพุฑูฺูโูุง ูุนุงู (ุจุง ุชูฺฉู ุชุฃููโฺฉููุฏู)
curl -X GET http://localhost:8080/api/v1/visitor-projects/available \
  -H "Authorization: Bearer YOUR_SUPPLIER_TOKEN"

# ุชุณุช ุงุฑุณุงู ูพุดููุงุฏ (ุจุง ุชูฺฉู ุชุฃููโฺฉููุฏู)
curl -X POST http://localhost:8080/api/v1/visitor-projects/1/proposal \
  -H "Authorization: Bearer YOUR_SUPPLIER_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "proposal_type": "interested",
    "message": "ูโุชูุงูู ุงู ูุญุตูู ุฑุง ุจุง ฺฉูุช ุนุงู ุชุฃูู ฺฉูู",
    "offered_price": "45000 USD"
  }'
```

### ุชุณุช ูุฑุงูุชโุงูุฏ:
1. ุจุง ฺฉ ุญุณุงุจ ูุฒุชูุฑ ูุงุฑุฏ ุดูุฏ
2. ุจู `/visitor-projects` ุจุฑูุฏ
3. ฺฉ ูพุฑูฺู ุงุฌุงุฏ ฺฉูุฏ
4. ุจุง ฺฉ ุญุณุงุจ ุชุฃููโฺฉููุฏู ูุงุฑุฏ ุดูุฏ
5. ุจู `/supplier-visitor-projects` ุจุฑูุฏ
6. ูพุฑูฺู ุฑุง ูุดุงูุฏู ฺฉูุฏ ู ูพุดููุงุฏ ุจุฏูุฏ
7. ุจุง ุญุณุงุจ ูุฒุชูุฑ ูุงุฑุฏ ุดูุฏ ู ูพุดููุงุฏ ุฑุง ุฏุฑ ุฌุฒุฆุงุช ูพุฑูฺู ุจุจูุฏ

## ููุชูฺฉุดูโูุง (ุขูุฏู)

ุฏุฑ ุญุงู ุญุงุถุฑ ุณุณุชู ููุชูฺฉุดู ูพุงุฏูโุณุงุฒ ูุดุฏู ุงุณุชุ ุงูุง ูโุชูุงูุฏ ุงุฒ `VisitorProjectNotification` ุจุฑุง:
- SMS ุจู ูุฒุชูุฑ ููฺฏุงู ุฏุฑุงูุช ูพุดููุงุฏ
- Push notification ุจู ุชุฃููโฺฉููุฏูโูุง ููฺฏุงู ุซุจุช ูพุฑูฺู ุฌุฏุฏ
- In-app notification

## ุขูุงุฑ ู ฺฏุฒุงุฑุดุงุช

ูโุชูุงูุฏ ุขูุงุฑ ุฒุฑ ุฑุง ุงุฒ ุฏุชุงุจุณ ุงุณุชุฎุฑุงุฌ ฺฉูุฏ:
- ุชุนุฏุงุฏ ูพุฑูฺูโูุง ูุนุงู
- ุชุนุฏุงุฏ ูพุดููุงุฏูุง ุงุฑุณุงู ุดุฏู
- ูุงูฺฏู ุชุนุฏุงุฏ ูพุดููุงุฏ ุจุฑุง ูุฑ ูพุฑูฺู
- ูุฑุฎ ุชุจุฏู (ูพุฑูฺูโูุง ฺฉู ูพุฐุฑูุชู ุดุฏูุฏ)

## ูุดฺฉูุงุช ุงุญุชูุงู

### ุฎุทุง "ุดูุง ุจุงุฏ ูุฒุชูุฑ ุชุฃุฏ ุดุฏู ุจุงุดุฏ"
- ูุทูุฆู ุดูุฏ ฺฉู ฺฉุงุฑุจุฑ ฺฉ Visitor ุซุจุช ุดุฏู ู ุชุฃุฏ ุดุฏู ุฏุงุฑุฏ
- ูุถุนุช ูุฒุชูุฑ ุจุงุฏ `approved` ุจุงุดุฏ

### ุฎุทุง "ุดูุง ุจุงุฏ ุชุฃููโฺฉููุฏู ุชุฃุฏ ุดุฏู ุจุงุดุฏ"
- ูุทูุฆู ุดูุฏ ฺฉู ฺฉุงุฑุจุฑ ฺฉ Supplier ุซุจุช ุดุฏู ู ุชุฃุฏ ุดุฏู ุฏุงุฑุฏ
- ูุถุนุช ุชุฃููโฺฉููุฏู ุจุงุฏ `approved` ุจุงุดุฏ

### ุฎุทุง "ุดูุง ูุจูุงู ุจุฑุง ุงู ูพุฑูฺู ูพุดููุงุฏ ุงุฑุณุงู ฺฉุฑุฏูโุงุฏ"
- ูุฑ ุชุฃููโฺฉููุฏู ููุท ฺฉ ุจุงุฑ ูโุชูุงูุฏ ุจุฑุง ูุฑ ูพุฑูฺู ูพุดููุงุฏ ุจุฏูุฏ
- ุจุฑุง ูุฑุงุด ูพุดููุงุฏุ ุจุงุฏ endpoint ุฌุฏุฏ ุงุถุงูู ุดูุฏ

## ูพุดููุงุฏุงุช ุจูุจูุฏ ุขูุฏู

1. ุณุณุชู ููุชูฺฉุดู ฺฉุงูู (SMS, Push, Email)
2. ููุชุฑูุง ูพุดุฑูุชู ุจุฑุง ุฌุณุชุฌู ูพุฑูฺูโูุง
3. ุณุณุชู ุงูุชุงุฒุฏู ุจุฑุง ูุฒุชูุฑูุง ู ุชุฃููโฺฉููุฏูโูุง
4. ฺุช ูุณุชูู ุจู ูุฒุชูุฑ ู ุชุฃููโฺฉููุฏู
5. ุฏุงุดุจูุฑุฏ ุขูุงุฑ ุจุฑุง ุงุฏูู
6. ูุงุจูุช ุขูพููุฏ ูุงูโูุง ูุณุชูุฏุงุช
7. ุณุณุชู ูพุดููุงุฏููุช ูุฐุงฺฉุฑูโุง
8. ุชููู ุชุญูู ู ูพฺฏุฑ ุณูุงุฑุด

---

ุชูุงู ูุงูโูุง ูุงุฒู ุงุฌุงุฏ ุดุฏู ู ุณุณุชู ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช! ๐
