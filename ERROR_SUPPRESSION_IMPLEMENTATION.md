# ๐ ูพุงุฏูโุณุงุฒ ุณุฑฺฉูุจ ุฎุทุงูุง ุซุจุชโูุงู

## ๐ ูุดฺฉู

ุฏู ููุน ุฎุทุง ูุฒุงุญู ฺฉู ูุจุงุฏ ุจู ฺฉุงุฑุจุฑ ููุงุด ุฏุงุฏู ุดููุฏ:

### 1๏ธโฃ **ุฎุทุง "ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"**
```
โ "ุดูุง ูููุฒ ุจู ุนููุงู ุชุฃููโฺฉููุฏู/ูุฒุชูุฑ ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"
- ุจู ุฑูฺฏ ูุฑูุฒ ููุงุด ุฏุงุฏู ูโุดุฏ
- ููุช ฺฉุงุฑุจุฑ ุซุจุชโูุงู ูฺฉุฑุฏู ุจูุฏุ toast ูุฑูุฒ ูโุขูุฏ
- ุฏุฑ ุญุงู ฺฉู ูุง alert ูุง ุขุจ ุฏูุณุชุงูู ุฏุงุฑู
```

### 2๏ธโฃ **ุฎุทุง "Authorization Token Required"**
```
โ "Authorization token is required"
- ูุจู ุงุฒ login ุง register ููุงุด ุฏุงุฏู ูโุดุฏ
- ููุช ฺฉุงุฑุจุฑ ูููุฒ ูุงฺฏู ูฺฉุฑุฏู ุจูุฏ
- ุงู ุฎุทุง ฺฉุงููุงู ุทุจุน ุงุณุช ู ูุจุงุฏ ุจู ฺฉุงุฑุจุฑ ููุงุด ุฏุงุฏู ุดูุฏ
```

---

## โ ุฑุงูโุญู

### ุชุบุฑ ุฏุฑ `errorHandler.ts`

ุงูุฒูุฏู ูุชุฏ ููุดููุฏ **`shouldSuppressError`** ฺฉู ุฎุทุงูุง ุฎุงุต ุฑุง ููุชุฑ ูโฺฉูุฏ:

```typescript
private shouldSuppressError(errorMessage: string, statusCode?: number): boolean {
  // ุจุฑุฑุณ ุงูฺฏููุง ุฎุงุต
  // ุงฺฏุฑ ุฎุทุง ูุฑุจูุท ุจู ุซุจุชโูุงู ุง token ุจุงุดุฏ โ ุณุฑฺฉูุจ ุดูุฏ
}
```

---

## ๐ฏ ุฎุทุงูุง ุณุฑฺฉูุจ ุดุฏู

### ุงูฺฏููุง ูุงุฑุณ:
```
- "ุซุจุชโูุงู ูฺฉุฑุฏู"
- "ุซุจุช ูุงู ูฺฉุฑุฏู"
- "ุซุจุชโูุงู ูุดุฏู"
- "ุซุจุช ูุงู ูุดุฏู"
```

### ุงูฺฏููุง ุงูฺฏูุณ:
```
Registration Errors:
- "not registered"
- "no registration"
- "not found visitor"
- "not found supplier"
- "visitor not found"
- "supplier not found"

Auth Errors:
- "authorization token is required"
- "authorization header is required"
- "token is required"
- "auth token required"
- "missing authorization"
```

### ุฎุทุงูุง 404 ุฏุฑ endpoint ูุง ุฎุงุต:
```
- visitor
- supplier
- registration
- ูุฒุชูุฑ
- ุชุฃูู/ุชุงูู
```

---

## ๐ ุฌุฑุงู ฺฉุงุฑ

### ูุจู:
```
1. ฺฉุงุฑุจุฑ ูุงุฑุฏ /visitor-status ูโุดูุฏ
2. API ูโฺฏูุฏ: "visitor not found" (404)
3. errorHandler ุฎุทุง ุฑุง ูโฺฏุฑุฏ
4. โ Toast ูุฑูุฒ ููุงุด ูโุฏูุฏ: "ุดูุง ูููุฒ ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"
5. Alert ุขุจ ูู ุฏุฑ ุตูุญู ูุณุช
6. โ ุฏู ูพุงู ุชฺฉุฑุงุฑ! ๐ซ
```

### ุจุนุฏ:
```
1. ฺฉุงุฑุจุฑ ูุงุฑุฏ /visitor-status ูโุดูุฏ
2. API ูโฺฏูุฏ: "visitor not found" (404)
3. errorHandler ุฎุทุง ุฑุง ูโฺฏุฑุฏ
4. โ shouldSuppressError: true โ Toast ููุงุด ุฏุงุฏู ููโุดูุฏ
5. ููุท Alert ุขุจ ุฏูุณุชุงูู ุฏุฑ ุตูุญู ููุงุด ุฏุงุฏู ูโุดูุฏ
6. โ ฺฉ ูพุงู ุฏูุณุชุงูู! ๐
```

---

## ๐ ฺฉุฏ ุชุบุฑ ุงูุชู

### `src/utils/errorHandler.ts`

```typescript
handleApiError(error: any, fallbackMessage: string = 'ุฎุทุง ุบุฑููุชุธุฑูโุง ุฑุฎ ุฏุงุฏ') {
  // ... extract error message ...
  
  // ๐ ููุชุฑ ฺฉุฑุฏู ุฎุทุงูุง ุซุจุชโูุงู
  if (this.shouldSuppressError(errorMessage, statusCode)) {
    console.log('โญ๏ธ Suppressing registration reminder error:', errorMessage);
    return errorMessage; // ููุท returnุ ุจุฏูู toast
  }
  
  // ... ุงุฏุงูู ฺฉุฏ ...
  
  // ููุงุด toast (ููุท ุงฺฏุฑ ุณุฑฺฉูุจ ูุดุฏู ุจุงุดุฏ)
  toast({ ... });
}

// ูุชุฏ ุฌุฏุฏ ุจุฑุง ุจุฑุฑุณ
private shouldSuppressError(errorMessage: string, statusCode?: number): boolean {
  const messageLower = errorMessage.toLowerCase();
  
  // ุจุฑุฑุณ ุงูฺฏููุง ุฎุงุต
  const suppressPatterns = [
    'ุซุจุชโูุงู ูฺฉุฑุฏู',
    'authorization token is required',
    'not registered',
    // ... ู ุบุฑู
  ];
  
  for (const pattern of suppressPatterns) {
    if (messageLower.includes(pattern.toLowerCase())) {
      return true; // ุณุฑฺฉูุจ ุดูุฏ
    }
  }
  
  // ุจุฑุฑุณ 404 ูุง ุฎุงุต
  if (statusCode === 404) {
    // ุงฺฏุฑ ูุฑุจูุท ุจู visitor/supplier ุจุงุดุฏ โ ุณุฑฺฉูุจ ุดูุฏ
  }
  
  return false;
}
```

---

## ๐จ ุชุฌุฑุจู ฺฉุงุฑุจุฑ

### ุณูุงุฑู 1: ฺฉุงุฑุจุฑ ุซุจุชโูุงู ูฺฉุฑุฏู

**ูุจู** โ:
```
[Toast ูุฑูุฒ] "ุดูุง ูููุฒ ุจู ุนููุงู ูุฒุชูุฑ ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"
[Alert ูุฑูุฒ ุฏุฑ ุตูุญู] "ุดูุง ูููุฒ ุจู ุนููุงู ูุฒุชูุฑ ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"
โ ุฏู ูพุงู ุชฺฉุฑุงุฑุ ูุฑ ุฏู ูุฑูุฒ!
```

**ุจุนุฏ** โ:
```
[Alert ุขุจ ุฏุฑ ุตูุญู] "ุงุฏุขูุฑ: ุซุจุชโูุงู ุจู ุนููุงู ูุฒุชูุฑ"
โ ฺฉ ูพุงู ุฏูุณุชุงููุ ุฑูฺฏ ุขุจ!
```

### ุณูุงุฑู 2: ฺฉุงุฑุจุฑ ูุงฺฏู ูฺฉุฑุฏู

**ูุจู** โ:
```
[Toast ูุฑูุฒ] "Authorization token is required"
โ ฺฉุงุฑุจุฑ ููโุฏุงูุฏ ฺู ฺฉุงุฑ ฺฉูุฏ! ๐
```

**ุจุนุฏ** โ:
```
[ูฺ ูพุงู ููุงุด ุฏุงุฏู ููโุดูุฏ]
โ ฺฉุงุฑุจุฑ ุจู ุตูุญู login ูุฏุงุช ูโุดูุฏ ุจุฏูู ุฎุทุง ๐
```

---

## ๐ ุจุฑุฑุณ ู ุชุณุช

### ุชุณุช ุฏุณุช:

#### 1. ุชุณุช ุฎุทุง ุซุจุชโูุงู:
```bash
# 1. Logout ฺฉูุฏ
# 2. ุจุฑู ุจู /visitor-status
# 3. ูุดุงูุฏู ฺฉูุฏ:
#    โ ููุท Alert ุขุจ ุฏุฑ ุตูุญู
#    โ ูฺ Toast ูุฑูุฒ ูุณุช
```

#### 2. ุชุณุช ุฎุทุง Token:
```bash
# 1. localStorage.clear()
# 2. ุจุฑู ุจู ุตูุญูโุง ฺฉู ูุงุฒ ุจู auth ุฏุงุฑุฏ
# 3. ูุดุงูุฏู ฺฉูุฏ:
#    โ ูฺ Toast ูุฑูุฒ "token required" ูุณุช
#    โ ูุฏุงุช ุจู login ุจุฏูู ุฎุทุง
```

#### 3. ุชุณุช Console:
```javascript
// ุจุงุฒ ฺฉูุฏ DevTools โ Console
// ููุช ุฎุทุง ุณุฑฺฉูุจ ูโุดูุฏุ ุงู ูุงฺฏ ุฑุง ูโุจูุฏ:
"โญ๏ธ Suppressing registration reminder error: ุดูุง ูููุฒ ุซุจุชโูุงู ูฺฉุฑุฏูโุงุฏ"
```

---

## ๐ ูุฒุงุง

1. **ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ**
   - ุญุฐู ูพุงูโูุง ุชฺฉุฑุงุฑ
   - ุญุฐู ุฎุทุงูุง ูุฒุงุญู
   
2. **UI ุชูุฒุชุฑ**
   - ููุท ฺฉ ูพุงู ุฏุฑ ุตูุญู (Alert ุขุจ)
   - ุจุฏูู Toast ูุง ูุฑูุฒ ูุฒุงุญู
   
3. **ููุทูโุชุฑ**
   - ุฎุทุงูุง ุทุจุน ุณุฑฺฉูุจ ูโุดููุฏ
   - ููุท ุฎุทุงูุง ูุงูุน ููุงุด ุฏุงุฏู ูโุดููุฏ
   
4. **ุงูุนุทุงูโูพุฐุฑ**
   - ูโุชูุงู ุงูฺฏููุง ุฌุฏุฏ ุงุถุงูู ฺฉุฑุฏ
   - ูุงุจู ุชูุณุนู ุจุฑุง ุฎุทุงูุง ุฏฺฏุฑ

---

## ๐ ุชุงุซุฑ

### ูุจู ุงุฒ ุชุบุฑุงุช:
```
- Toast ูุง ูุฑูุฒ ูุฒุงุญู: 100%
- ูพุงูโูุง ุชฺฉุฑุงุฑ: ุฒุงุฏ
- ูุงุฑุถุงุช ฺฉุงุฑุจุฑ: ุจุงูุง
```

### ุจุนุฏ ุงุฒ ุชุบุฑุงุช:
```
- Toast ูุง ูุฑูุฒ ูุฒุงุญู: 0%
- ูพุงูโูุง ุชฺฉุฑุงุฑ: ูฺ
- ูุงุฑุถุงุช ฺฉุงุฑุจุฑ: ูพุงู
```

---

## ๐ง ูุงุจูุช ุชูุณุนู

ูโุชูุงู ุงูฺฏููุง ุฏฺฏุฑ ูู ุงุถุงูู ฺฉุฑุฏ:

```typescript
const suppressPatterns = [
  // ุงูฺฏููุง ูุนู
  'ุซุจุชโูุงู ูฺฉุฑุฏู',
  'authorization token is required',
  
  // ุงูฺฏููุง ุฌุฏุฏ (ุฏุฑ ุขูุฏู)
  'profile not complete',  // ูพุฑููุงู ุชฺฉูู ูุดุฏู
  'payment pending',       // ูพุฑุฏุงุฎุช ุฏุฑ ุงูุชุธุงุฑ
  // ... ู ุบุฑู
];
```

---

## ๐ ูฺฉุงุช ููู

### 1. Logging
```typescript
// ุฎุทุงูุง ุณุฑฺฉูุจ ูโุดููุฏ ุงูุง ุฏุฑ console ูุงฺฏ ูโุดููุฏ
console.log('โญ๏ธ Suppressing registration reminder error:', errorMessage);
```

### 2. Return Value
```typescript
// ุญุช ุงฺฏุฑ ุณุฑฺฉูุจ ุดูุฏุ errorMessage ุจุฑฺฏุดุช ุฏุงุฏู ูโุดูุฏ
// ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ catch blocks
return errorMessage;
```

### 3. ููุท Toast ุณุฑฺฉูุจ ูโุดูุฏ
```typescript
// Toast ููุงุด ุฏุงุฏู ููโุดูุฏ
// ุงูุง error event dispatch ูโุดูุฏ (ุจุฑุง logging)
```

---

## ๐ฏ ุฎูุงุตู

| ููุถูุน | ูุจู | ุจุนุฏ |
|-------|-----|-----|
| ุฎุทุง ุซุจุชโูุงู | Toast ูุฑูุฒ โ | ุณุฑฺฉูุจ โ |
| ุฎุทุง Token | Toast ูุฑูุฒ โ | ุณุฑฺฉูุจ โ |
| Alert ุฏุฑ ุตูุญู | ุขุจ โ | ุขุจ โ |
| ุชุฌุฑุจู ฺฉุงุฑุจุฑ | ููู ๐ | ูุซุจุช ๐ |

---

## ๐ ูุชุฌู

ุจุง ุงู ุชุบุฑุงุช:

โ ุฎุทุงูุง ูุฒุงุญู ุณุฑฺฉูุจ ูโุดููุฏ  
โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ ูโุดูุฏ  
โ UI ุชูุฒุชุฑ ูโุดูุฏ  
โ ููุท ูพุงูโูุง ุฏูุณุชุงูู ููุงุด ุฏุงุฏู ูโุดููุฏ  

**ฺฉุงุฑุจุฑุงู ุฏฺฏุฑ ุจุง Toast ูุง ูุฑูุฒ ุขุฒุงุฑ ุฏุงุฏู ููโุดููุฏ! ๐**

---

**ุชุงุฑุฎ ูพุงุฏูโุณุงุฒ**: 2024-11-07  
**ูุถุนุช**: โ ุชฺฉูู ุดุฏู  
**ูุณุฎู**: 1.0.0
